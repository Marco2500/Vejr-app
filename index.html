<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Solnedgang Vejr</title>

<style>
body {
   margin: 0;
   font-family: Arial, sans-serif;
   color: white;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
   overflow: hidden;
   transition: background 0.6s ease;
   background: linear-gradient(to bottom,
      #0a1a3b 0%,
      #3d1e6e 50%,
      #ff7e5f 70%,
      #feb47b 80%,
      #87ceeb 100%);
}

body.sunny { background: linear-gradient(to bottom, #87ceeb, #fefcea, #f1da36); }
body.cloudy { background: linear-gradient(to bottom, #5f5f5f, #8a8a8a, #bdbdbd); }
body.night { background: linear-gradient(to bottom, #020111, #191970, #000000); }

#skyIcon {
   position: absolute;
   bottom: 190px;
   left: 50%;
   transform: translateX(-50%);
   width: 130px;
   height: 130px;
   background-size: contain;
   background-repeat: no-repeat;
   background-position: center;
   z-index: 0;
}

.ocean {
   position: absolute;
   bottom: 0;
   width: 100%;
   height: 180px;
   background: linear-gradient(to top, #0b3d91, #1e90ff 70%, rgba(255,255,255,0.1));
   z-index: 0;
}

body.sunny .ocean,
body.cloudy .ocean,
body.night .ocean { display: none; }

/* ===== CONTAINER SMALLERE ===== */
.container {
   width: 100%;
   max-width: 400px; /* SMALLERE */
   background: rgba(0,0,0,0.25);
   backdrop-filter: blur(10px);
   padding: 20px;
   border-radius: 16px;
   z-index: 1;
}

/* Søgefelt og knap samme bredde */
.container > div:first-child {
   display: flex;
   flex-direction: column;
   align-items: center;
}

.container > div:first-child input,
.container > div:first-child button {
   width: 200px;  /* Lidt smallere */
   padding: 10px;
   font-size: 15px;
   border-radius: 10px;
   border: none;
   margin-bottom: 6px;
}

button { background: rgba(255,255,255,0.3); color: white; cursor: pointer; }

.city { font-size: 24px; margin-top: 12px; text-align: center; }
.temp { font-size: 48px; font-weight: bold; text-align: center; }
.desc { font-size: 16px; opacity: 0.9; text-align: center; }

.hourly, #daily {
   display: flex;
   gap: 10px;
   overflow-x: auto;
   margin-top: 14px;
}

.hour, .day {
   min-width: 70px; /* SMALLERE */
   text-align: center;
   background: rgba(255,255,255,0.2);
   padding: 6px;
   border-radius: 12px;
   font-size: 13px;
}

.hour img, .day img { width: 30px; }

@media (max-width: 600px) {
   .container { max-width: 320px; padding: 14px; }
   .city { font-size: 20px; }
   .temp { font-size: 40px; }
   .desc { font-size: 14px; }
   #skyIcon { width: 80px; height: 80px; bottom: 140px; }
   .hour, .day { min-width: 60px; padding: 5px; font-size: 12px; }
   .hour img, .day img { width: 28px; }
   .container > div:first-child input,
   .container > div:first-child button { width: 180px; }
}
</style>
</head>

<body>
<div id="skyIcon"></div>
<div class="ocean"></div>

<div class="container">
   <div>
      <input id="city" placeholder="Søg på by (fx København)">
      <button onclick="loadWeather()">Søg</button>
   </div>

   <div class="city" id="cityName"></div>
   <div class="temp" id="temp"></div>
   <div class="desc" id="desc"></div>

   <div class="hourly" id="hourly"></div>
   <div id="daily"></div>
</div>

<script>
const apiKey = "93e77471c08a4a84b805f0116e657fc6";

document.getElementById("city").addEventListener("keypress", e => {
   if (e.key === "Enter") loadWeather();
});

function getWeatherIcon(weather, windSpeed, iconCode, temp) {
   if (windSpeed >= 10) return "vind.svg";
   if (iconCode.includes("n")) return "måne.svg";
   if (weather === "Clouds" || temp <= 5) return "overskyddet.svg";
   if (weather === "Rain") return "regn.svg";
   if (weather === "Clear") return "sol.svg";
   return "overskyddet.svg";
}

function setBackground(weather, iconCode, temp) {
   document.body.classList.remove("sunny", "cloudy", "night");
   if (iconCode.includes("n")) document.body.classList.add("night");
   else if (weather === "Clouds" || temp <= 5) document.body.classList.add("cloudy");
   else if (weather === "Clear") document.body.classList.add("sunny");
}

function loadWeather() {
   const city = document.getElementById("city").value;

   fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&lang=da&appid=${apiKey}`)
   .then(r => r.json())
   .then(d => {
      cityName.innerText = d.name;
      temp.innerText = Math.round(d.main.temp) + "°";
      desc.innerText = d.weather[0].description;

      setBackground(d.weather[0].main, d.weather[0].icon, d.main.temp);
      skyIcon.style.backgroundImage = `url(${getWeatherIcon(
         d.weather[0].main, d.wind.speed, d.weather[0].icon, d.main.temp
      )})`;
   });

   fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city}&units=metric&lang=da&appid=${apiKey}`)
   .then(r => r.json())
   .then(d => {
      hourly.innerHTML = "";
      daily.innerHTML = "";

      // Timer
      d.list.slice(0,8).forEach(h => {
         const hour = new Date(h.dt_txt).getHours();
         hourly.innerHTML += `
         <div class="hour">
            <div>${hour}:00</div>
            <img src="${getWeatherIcon(h.weather[0].main, h.wind.speed, h.weather[0].icon, h.main.temp)}">
            <div>${Math.round(h.main.temp)}°</div>
         </div>`;
      });

      // Dage
      const days = new Map();
      d.list.forEach(item => {
         if (item.dt_txt.includes("12:00:00") && days.size < 5) {
            const day = new Date(item.dt_txt).toLocaleDateString("da-DK",{weekday:"short"});
            if (!days.has(day)) days.set(day, item);
         }
      });

      days.forEach(item => {
         const dayName = new Date(item.dt_txt).toLocaleDateString("da-DK",{weekday:"short"});
         const icon = getWeatherIcon(item.weather[0].main, item.wind.speed, item.weather[0].icon, item.main.temp);

         daily.innerHTML += `
         <div class="day">
            <div>${dayName}</div>
            <img src="${icon}">
            <div>${Math.round(item.main.temp)}°</div>
         </div>`;
      });
   });
}
</script>
</body>
</html>
